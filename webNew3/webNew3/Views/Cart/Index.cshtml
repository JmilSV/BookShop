@model MyCart

@{
    ViewBag.Title = "Корзина";
    Categories.category = null;
}



<div class="col-xs-12">
        <div class="col-xs-12">
            <div class="col-xs-8">
                <h2>Корзина</h2>
            </div>
            @if (Model.bookCartCount > 0)
            {
                <div class="col-xs-4 text-right">
                    <div class="col-xs-12">
                        @using (Html.BeginForm("Clear", "Cart", FormMethod.Post))
                        {
                            <input type="submit" class="btn btn-danger marginTop20px" 
                                   value="Очистити корзину" />
                        }
                    </div>
                </div>
            }
            else
            {
                <div class="col-xs-4"></div>
            }
        </div>
        <div class="col-xs-12"><hr/></div>
    @if (Model.bookCartCount > 0)
    { 
            for(int i = 0; i < Model.bookCartCount; i++)
            {
                <div class="col-xs-12 bookColor">
                    <div class="col-xs-8 bookColor fontSize120 text-primary">
                        <div class="col-xs-12 marginTop20px"></div>
                        <div class="col-xs-1">
                            <h3>@(i + 1)</h3>
                        </div>
                        <div class="col-xs-3 thumbnail">
                            @Html.Image(string.IsNullOrEmpty(Model[i].book.BookTitle) ?
                        "~/images/bookTitles/default/defaultBook.jpg" :
                        Model[i].book.BookTitle, "Книга")
                        </div>
                        <div class="col-xs-5">
                            @Model[i].book.Name (@Model[i].book.Author.FirstName
                            @Model[i].book.Author.LastName)
                        </div>
                        <div class="col-xs-3">
                            @string.Format("{0:C}", @Model[i].book.Price)
                        </div>
                    </div>

                    <div class="col-xs-4">
                        <div class="row marginBottom5px">
                                <div class="col-xs-12 gap30px"></div>
                                <div class="col-xs-3">
                                    @using (Html.BeginForm("DecrementAmount", "Cart", FormMethod.Post))
                                    {
                                        @Html.Hidden("bookId", Model[i].book.BookId);
                                        <button type="submit" class="btn btn-link">
                                            <i class="glyphicon glyphicon-chevron-left"></i>
                                        </button>
                                    }
                                </div>
                                <div class="col-xs-6">
                                    <h4 class="text-primary">
                                        @Html.DisplayFor(b => b[i].amount)<span> </span>
                                        @BookEnd.GetRightEnd(Model[i].amount).ToLower()
                                    </h4>
                                </div>
                                <div class="col-xs-3">
                                    @using (Html.BeginForm("IncrementAmount", "Cart", FormMethod.Post))
                                    {
                                        @Html.Hidden("bookId", Model[i].book.BookId);
                                        <button type="submit" class="btn btn-link">
                                            <i class="glyphicon glyphicon-chevron-right"></i>
                                        </button>
                                    }
                                </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 center-block">
                                @using (Html.BeginForm("RemoveBook", "Cart", FormMethod.Post))
                                {
                                    @Html.Hidden("bookId", Model[i].book.BookId)
                                    <button type="submit" class="btn btn-link">
                                        <i></i>
                                    </button>
                                }
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="row col-xs-12">
                    <br/>
                </div>
            }
        <div class="col-xs-12">
            <div class="col-xs-6"></div>
            <div class="col-xs-6">
                <h4 class="fontSize150 text-center text-primary">
                    Вартість замовлення: @string.Format("{0:C}", Model.Cost)
                </h4>
            </div>
            
        </div>
        <div class="col-xs-12">
            <div class="col-xs-6">
                @using (Html.BeginForm("Index", "Home", FormMethod.Get))
{
    string category = MyCart.GetCart().BookCarts.Last().book.Category;

    switch (category)
    {
                        case "brainLiterature":
                            <button type="submit" class="btn btn-lg btn-info btn-block center-block"
                                    name="category" value="brainLiterature">
                                Продовжити купувати
                            </button>; break;
                        case "horrors":
                            <button type="submit" class="btn btn-lg btn-info btn-block center-block"
                                    name="category" value="horrors">
                                Продовжити купувати
                            </button>; break;
                        case "romance":
                            <button type="submit" class="btn btn-lg btn-info btn-block center-block"
                                    name="category" value="romance">
                                Продовжити купувати
                            </button>; break;
                        case "detective":
                            <button type="submit" class="btn btn-lg btn-info btn-block center-block"
                                    name="category" value="detective">
                                Продовжити купувати
                            </button>; break;
                        case "forChildren":
                            <button type="submit" class="btn btn-lg btn-info btn-block center-block"
                                    name="category" value="forChildren">
                                Продовжити купувати
                            </button>; break;
                        default:
                            <button type="submit" class="btn btn-lg btn-info btn-block center-block"
                                    name="category" value="forSoul">
                                Продовжити купувати
                            </button>; break;
                    }
                }
            </div>
            <div class="col-xs-6">
                <a href="~/Order/Create" class="btn btn-lg btn-primary btn-block center-block ">
                    Оформити замовлення
                </a>
            </div>
        </div>
    }
    else
    {
        <div class="col-xs-12 gap30px">
            <h3 class="text-center">Ваша корзина пустує. Добавте в неї пару книг!</h3>
            <a href="~/home/index" class="btn btn-lg btn-block center-block">
                Повернутись до каталогу товарів
            </a>
        </div>
    }
</div>

